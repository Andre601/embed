type Connection {
  type: String!
  data: String!
  profile: Profile! @relation(name: "ProfileToConnections")
}

type Profile {
  id: ID! @unique
  username: String! @unique
  avatarURL: String
  connections: [Connection!]!
    @relation(name: "ProfileToConnections", onDelete: CASCADE)
  guests: [GuildGuest!]!
    @relation(name: "ProfileToGuildGuests", onDelete: CASCADE) @rename(oldName: "guilds")
  email: String
  bans: [GuildBan!]! @relation(name: "GuildBanToProfile")
}

type ThemeColors {
  id: ID! @unique
  theme: Theme! @relation(name: "ThemeColorsToTheme", onDelete: CASCADE)
  primary: String @default(value: "white")
  accent: String @default(value: "red")
  background: String @default(value: "black")
}

type Theme {
  id: ID! @unique
  guilds: [Guild!]! @relation(name: "ThemeToGuilds")
  css: String @default(value: "")
  colors: ThemeColors! @relation(name: "ThemeColorsToTheme")
}

type GuildGuest {
  id: ID! @unique
  guild: Guild! @relation(name: "GuildToGuests")
  profile: Profile! @relation(name: "ProfileToGuildGuests")
  nickname: String
}

type GuildBan {
  guild: Guild! @relation(name: "GuildToGuildBans")
  ip: String
  profile: Profile @relation(name: "GuildBanToProfile")
}

type Guild {
  snowflake: ID! @unique
  theme: Theme @relation(name: "ThemeToGuilds")
  guests: [GuildGuest!]! @relation(name: "GuildToGuests", onDelete: CASCADE)
  bans: [GuildBan!]! @relation(name: "GuildToGuildBans", onDelete: CASCADE)
}
